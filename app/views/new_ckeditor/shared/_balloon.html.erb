<div id="<%= id %>_div"></div>

<script>
  document.getElementById("<%= id %>_div").innerHTML = document.getElementById("<%= id %>").value;

  BalloonEditor
      .create( document.querySelector( '#<%= id %>_div' ), {
        toolbar: {
					items: [
						'heading',
						'|',
						'bold',
						'italic',
						'strikethrough',
						'underline',
						'link',
						'bulletedList',
						'numberedList',
						'|',
						'indent',
						'outdent',
						'alignment',
						'|',
						'imageUpload',
						'blockQuote',
						'insertTable',
						'mediaEmbed',
						'undo',
						'redo',
						'fontFamily',
						'fontSize',
						'fontColor',
						'fontBackgroundColor',
						'highlight',
						'horizontalLine',
						'code',
						'codeBlock',
						'pageBreak',
						'removeFormat'
          ]
        },
        simpleUpload: {
          uploadUrl: '/posts/upload',
          headers: {
              'X-CSRF-Token': document.querySelectorAll('meta[name="csrf-token"]')[0].content
          }
        },
        language: 'en',
        image: {
          toolbar: [ 'imageTextAlternative', '|', 'imageStyle:alignLeft', 'imageStyle:full', 'imageStyle:alignRight' ],

            styles: [
                'full',
                'alignLeft',
                'alignRight'
            ]
        },
        table: {
          contentToolbar: [
            'tableColumn',
            'tableRow',
            'mergeTableCells'
          ]
        },
      } )
      .then( editor => {
        // edit code here
        // if you want to change logic and for example
        // to send data to server using AJAX
        var editorHiddenField = document.getElementById("<%= id %>");
        editor.model.document.on( 'change:data', () => {
          editorHiddenField.value = editor.getData();
          <%= raw options.dig("editor", "js") %>;
        });
      } )
      .catch( error => {
        console.error( error );
      } );
</script>